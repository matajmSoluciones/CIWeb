<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Prueba JVision</title>
	<link rel="stylesheet" href="">
</head>
<body>
	<h1>Prueba Consola</h1>	
	<script src="Morphology.js" type="text/javascript"></script>	
	<script src="geometry.js" type="text/javascript"></script>	
	<script src="TurboColors.js" type="text/javascript"></script>	
	<script src="VisionConfig.js" type="text/javascript"></script>	
	<script src="JSVisionLib.js" type="text/javascript"></script>
	<script src="JVision.js" type="text/javascript"></script>
	<script>
		window.addEventListener("load",function(){
			var img=new Image();
			img.onload=function(e){
				var real=new Image();
				var lienzo=document.createElement("canvas");
				lienzo.width=img.naturalWidth;
				lienzo.height=img.naturalHeight;
				var context=lienzo.getContext("2d");
				context.drawImage(img,0,0,lienzo.width,lienzo.height);
				var template=context.getImageData(0,0,lienzo.width,lienzo.height);
				var step=1.2;
				var winds=JVision.classifyPyramid(lienzo,step,20,20);				
				var temp=JSVision.window.Pyramid.foreach(template,step,20,20,function(wind,i){
					if(wind.width!=winds[i].canvas.width || wind.height!=winds[i].canvas.height){
						throw new Error("Las ventanas piramides no coinciden en coordenadas!...");
					}
					var datas=winds[i].getImageData(0,0,winds[i].canvas.width,winds[i].canvas.height);
					document.body.appendChild(winds[i].canvas);
					var clone=winds[i].canvas.cloneNode(true);
					var ctx=clone.getContext("2d");
					ctx.putImageData(wind,0,0);
					document.body.appendChild(clone);
					var br=document.createElement("br");
					document.body.appendChild(br);
					/*for(var j=0,n=datas.data.length;j<n;j++){
						if(datas.data[j]!=temp[i].data[j]){
							throw new Error("Los pixeles no coinciden!...");
						}
					}*/									
				});
				console.log("Pureba de piramide exitosa...\n Verifique que las imagenes concuerden");
			}
			img.src='templates/LBPTest.jpeg';
		});
	</script>
</body>
</html>