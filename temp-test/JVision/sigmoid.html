<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Prueba JVision</title>
	<link rel="stylesheet" href="">
</head>
<body>
	<h1>Prueba Render</h1>
	<canvas id="ouput" width="350" height="200"></canvas>
	<input type="file" id="file" accept="image/*">
	<div id="windows"></div>
	<script src="Matrix.js" type="text/javascript"></script>
	<script src="TurboColors.js" type="text/javascript"></script>
	<script src="Morphology.js" type="text/javascript"></script>
	<script src="JSVisionLib.js" type="text/javascript"></script>
	<script src="JVCascade.js" type="text/javascript"></script>
	<script>
		var W=[
	[
		2.07416507
	],
	[
		0.632852058
	],
	[
		0.742186404
	],
	[
		1.06665036
	],
	[
		0.914857219
	],
	[
		0.257452267
	],
	[
		0.661370989
	],
	[
		0.972827945
	],
	[
		0.5101618
	],
	[
		0.0557471495
	],
	[
		0.545744676
	],
	[
		0.227465179
	],
	[
		0.0418087257
	],
	[
		-0.344407701
	],
	[
		0.0510099316
	],
	[
		-0.0690358846
	],
	[
		-0.635820251
	],
	[
		-0.671582084
	],
	[
		0.611223441
	],
	[
		0.800452609
	],
	[
		0.35732261
	],
	[
		0.504265755
	],
	[
		0.332851132
	],
	[
		0.319268812
	],
	[
		0.634143848
	],
	[
		-0.279783963
	],
	[
		0.391782478
	],
	[
		-0.193907175
	],
	[
		0.297171666
	],
	[
		-0.814302179
	],
	[
		0.0167032845
	],
	[
		-1.38253302
	],
	[
		0.212319171
	],
	[
		0.653395633
	],
	[
		-0.13032702
	],
	[
		0.776962123
	],
	[
		0.196273198
	],
	[
		0.511527535
	],
	[
		0.588671612
	],
	[
		0.728703076
	],
	[
		0.363795466
	],
	[
		0.189764652
	],
	[
		0.375379459
	],
	[
		0.542597812
	],
	[
		0.0622208885
	],
	[
		0.00263817062
	],
	[
		0.618037671
	],
	[
		0.268454133
	],
	[
		0.206259725
	],
	[
		-0.815376682
	],
	[
		0.14102904
	],
	[
		0.161461484
	],
	[
		-0.0880640089
	],
	[
		-0.311753282
	],
	[
		0.0850749613
	],
	[
		-0.0301880363
	],
	[
		0.194210083
	],
	[
		-0.213015289
	],
	[
		-0.663109057
	],
	[
		-0.194018747
	],
	[
		-0.275517371
	],
	[
		-2.42056852
	],
	[
		-0.096893204
	],
	[
		-0.978794077
	],
	[
		-0.108574893
	],
	[
		-1.05468736
	],
	[
		-0.365598306
	],
	[
		0.0513295391
	],
	[
		-0.482492078
	],
	[
		0.038159997
	],
	[
		0.444215628
	],
	[
		-0.20740954
	],
	[
		-0.056340525
	],
	[
		0.285647152
	],
	[
		0.510474816
	],
	[
		0.422434096
	],
	[
		0.0433905244
	],
	[
		0.314265991
	],
	[
		0.634705228
	],
	[
		-0.164874053
	],
	[
		0.526966612
	],
	[
		-0.148834569
	],
	[
		-0.0579768538
	],
	[
		0.44371479
	],
	[
		0.373433499
	],
	[
		0.623938183
	],
	[
		0.118288915
	],
	[
		-0.159729861
	],
	[
		0.640163926
	],
	[
		0.571630456
	],
	[
		0.427007561
	],
	[
		0.334010322
	],
	[
		0.482286197
	],
	[
		0.0330869194
	],
	[
		0.508371421
	],
	[
		0.663113516
	],
	[
		-0.342532932
	],
	[
		-0.203677489
	],
	[
		0.247650612
	],
	[
		0.388273585
	],
	[
		0.0531508063
	],
	[
		0.211011472
	],
	[
		-0.261703733
	],
	[
		0.169767007
	],
	[
		-0.359750761
	],
	[
		0.303064179
	],
	[
		0.459908026
	],
	[
		-0.118707567
	],
	[
		-0.292552078
	],
	[
		-0.363087257
	],
	[
		-0.279169773
	],
	[
		0.0206094788
	],
	[
		0.0513326281
	],
	[
		-1.05941202
	],
	[
		0.309155868
	],
	[
		0.102585637
	],
	[
		-0.445944666
	],
	[
		-0.307802578
	],
	[
		0.198296876
	],
	[
		-0.237834185
	],
	[
		-0.742291496
	],
	[
		-2.45625979
	],
	[
		-0.216291696
	],
	[
		-0.130212203
	],
	[
		-0.51985149
	],
	[
		-0.921546861
	],
	[
		-0.324282484
	],
	[
		-0.017155899
	],
	[
		-0.330262132
	],
	[
		-0.660642784
	],
	[
		-0.115516523
	],
	[
		0.315803225
	],
	[
		-0.657992784
	],
	[
		0.265986667
	],
	[
		0.121124394
	],
	[
		0.24892572
	],
	[
		-1.17427152
	],
	[
		-0.114608425
	],
	[
		0.477321676
	],
	[
		0.192520357
	],
	[
		-0.34880231
	],
	[
		0.0318549963
	],
	[
		0.454041883
	],
	[
		0.0986481404
	],
	[
		-0.34097442
	],
	[
		0.0883409063
	],
	[
		-0.367549297
	],
	[
		0.323362114
	],
	[
		0.258186767
	],
	[
		-0.035531076
	],
	[
		0.0890339902
	],
	[
		0.397976979
	],
	[
		0.72122679
	],
	[
		-0.171185305
	],
	[
		0.422135799
	],
	[
		0.393839579
	],
	[
		0.462786975
	],
	[
		-0.0417285285
	],
	[
		0.0272992397
	],
	[
		0.357185738
	],
	[
		-0.288093513
	],
	[
		0.66175919
	],
	[
		0.0959415393
	],
	[
		0.641548395
	],
	[
		-0.063811282
	],
	[
		-0.114891685
	],
	[
		0.416411283
	],
	[
		0.027818685
	],
	[
		-0.243414963
	],
	[
		0.328118196
	],
	[
		0.627318536
	],
	[
		0.0278068186
	],
	[
		0.646851503
	],
	[
		0.18315353
	],
	[
		-0.0832870906
	],
	[
		0.37219854
	],
	[
		0.0269722352
	],
	[
		-0.318315461
	],
	[
		0.418975737
	],
	[
		0.452443925
	],
	[
		0.43458284
	],
	[
		0.438447774
	],
	[
		-0.0269980163
	],
	[
		0.431808158
	],
	[
		0.196790505
	],
	[
		-0.245672034
	],
	[
		0.319658695
	],
	[
		0.29568206
	],
	[
		0.163522362
	],
	[
		-0.441632469
	],
	[
		-0.385596603
	],
	[
		-0.308686169
	],
	[
		-0.0903770837
	],
	[
		-0.147200022
	],
	[
		-1.16158084
	],
	[
		-0.615434995
	],
	[
		-2.31202407
	],
	[
		-0.711164354
	],
	[
		-0.508790639
	],
	[
		0.0628492871
	],
	[
		-1.13579319
	],
	[
		-0.411621163
	],
	[
		-0.427053759
	],
	[
		-0.0709566568
	],
	[
		0.0495953231
	],
	[
		-0.351487688
	],
	[
		-0.484093908
	],
	[
		-0.161867265
	],
	[
		0.308312421
	],
	[
		0.218905759
	],
	[
		0.0903616379
	],
	[
		0.1001244
	],
	[
		0.00447386431
	],
	[
		-0.169187644
	],
	[
		-0.0876796389
	],
	[
		-0.0398157745
	],
	[
		-0.264962351
	],
	[
		-0.0563479332
	],
	[
		-0.0658838621
	],
	[
		0.415060718
	],
	[
		0.408581313
	],
	[
		0.444060977
	],
	[
		-0.215017966
	],
	[
		-0.563065599
	],
	[
		-0.725028857
	],
	[
		-0.658777909
	],
	[
		-1.77955564
	],
	[
		-0.357263343
	],
	[
		-1.02793784
	],
	[
		-0.0123023737
	],
	[
		-0.453913281
	],
	[
		0.320569192
	],
	[
		0.347793322
	],
	[
		0.272114659
	],
	[
		-0.080576379
	],
	[
		0.188242064
	],
	[
		-0.232109922
	],
	[
		-0.0471895068
	],
	[
		0.367657958
	],
	[
		0.0920478685
	],
	[
		-0.167565675
	],
	[
		-1.29364146
	],
	[
		-0.422246345
	],
	[
		0.350390335
	],
	[
		0.00452298515
	],
	[
		0.473769903
	],
	[
		0.448147487
	],
	[
		0.460115189
	],
	[
		0.0188789513
	],
	[
		-0.120408565
	],
	[
		0.198293608
	],
	[
		0.862111985
	],
	[
		0.263373173
	],
	[
		1.11183604
	],
	[
		1.44048436
	],
	[
		2.32148457
	],
	[
		-1.12655076
	]
];
		var lienzo,link,parent,objects=[[],[]];
		window.addEventListener("load",function(){
			var file=document.getElementById("file");
			parent=document.getElementById("ouput").getContext("2d");
			var input=new Image();			
			input.onload=function(){
				parent.drawImage(input,0,0,parent.canvas.width,parent.canvas.height);
				var img=parent.getImageData(0,0,parent.canvas.width,parent.canvas.height);
				var hist=Histograms(img.data,"GRAY");
				hist.Normalize();
				var h=MFunction.Sigmoidea(Matrix.inmultiply([Float32Array.from([1].concat(Array.from(hist)))],W));
				var e=Math.abs(h-0.86561);
				if(e>=0.1){
					throw new Error("Los resultados no poseen probabilidades similares");
				}
				console.log("Resultados exitosos con un margen de error de "+e);
			}
			input.src="img.png";
		})
		
	</script>
</body>
</html>