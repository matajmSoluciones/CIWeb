<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Prueba Matrix</title>
	<link rel="stylesheet" href="">
</head>
<body>
	<label for="M">Columnas:</label>
	<input type="number" id="M" value="0">	
	<label for="N">Filas:</label>
	<input type="number" id="N" value="0">
	<button id="load">Cargar clasificador Strong</button>
	<script src="../Matrix/Matrix.js" type="text/javascript"></script>
	<script>
	window.addEventListener("load",function(){
		var button=document.getElementById("load");
		var column=document.getElementById("M");
		var rows=document.getElementById("N");
		button.addEventListener("click",function(){
			var input=document.createElement("input");
			input.type="file";
			input.addEventListener("change",function(event){
				var file=event.target.files[0];
				var reader=new FileReader();
				reader.onload=function(e){
					var matrix=[];
					var STRING=e.target.result.split("\n");
					for(let i=0,n=STRING.length;i<n;i++){
						if(STRING[i].trim()!=""){
							var columns=STRING[i].split(" ");
							var row=[];
							for(let j in columns){
								if(columns[j].trim()!=""){
									row.push(parseFloat(columns[j]));
								}
							}
							matrix.push(row);
						}
					}
					matrix.map(function(row){
						console.log(row);
						var wc=Matrix.Reshape(row,parseInt(column.value),parseInt(rows.value));
						return wc;
					});
					var file=new Blob([JSON.stringify(matrix,2,"\t")],{type:"application/json"});
					var url=window.URL.createObjectURL(file);
					var a=document.createElement("a");
					a.download="data.json";
					a.href=url;
					var clicEvent = new MouseEvent('click', {
						'view': window,
						'bubbles': true,
						'cancelable': true
					});
					//Simulamos un clic del usuario
					//no es necesario agregar el link al DOM.
					a.dispatchEvent(clicEvent);
				}
				reader.readAsText(file);
			});
			input.click();
		});
	})
	</script>
</body>
</html>